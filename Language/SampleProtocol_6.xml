<protocol name="SampleProtocol" majorVer="0" minorVer="0">
    <members>
        <message name="LoginPublicRequest" id="0" size="16">
            <fields>
                <field name="Name" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="LoginPrivateRequest" id="1" size="16">
            <fields>
                <field name="Name" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="PasswordRequest" id="2" size="16">
            <fields>
                <field name="Token" offset="8" type="bytes" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="PasswordResponse" id="3" size="16">
            <fields>
                <field name="EncodedToken" offset="8" type="bytes" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="LoginAccept" id="4" size="8"/>
        <message name="LoginReject" id="5" size="16">
            <fields>
                <field name="Text" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="SymbolRequest" id="6" size="16">
            <subMessages>
                <subMessage name="SubscribeSymbolRequest"/>
                <subMessage name="UnsubscribeSymbolRequest"/>
            </subMessages>
            <fields>
                <field name="Symbol" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="SymbolResponse" id="7" size="16">
            <subMessages>
                <subMessage name="SubscribeSymbolAccept"/>
                <subMessage name="SubscribeSymbolReject"/>
                <subMessage name="UnsubscribeSymbolAccept"/>
                <subMessage name="SnapshotRefresh"/>
            </subMessages>
            <fields>
                <field name="Symbol" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="SubscribeSymbolRequest" id="8" superMessage="SymbolRequest" size="16">
            <fields>
                <field name="Symbol" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="SubscribeSymbolAccept" id="9" superMessage="SymbolResponse" size="16">
            <fields>
                <field name="Symbol" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="SubscribeSymbolReject" id="10" superMessage="SymbolResponse" size="24">
            <fields>
                <field name="Symbol" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="Text" offset="16" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="UnsubscribeSymbolRequest" id="11" superMessage="SymbolRequest" size="16">
            <fields>
                <field name="Symbol" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="UnsubscribeSymbolAccept" id="12" superMessage="SymbolResponse" size="16">
            <fields>
                <field name="Symbol" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <enum name="Side" size="4">
            <members>
                <member name="Bid" value="0"/>
                <member name="Ask" value="1"/>
            </members>
        </enum>
        <group name="SnapshotRefreshEntry" size="20">
            <fields>
                <field name="Side" offset="0" type="Side" optional="N" repeatable="N"/>
                <field name="Qty" offset="4" type="int32" optional="N" repeatable="N"/>
                <field name="Price" offset="8" type="double" optional="N" repeatable="N"/>
                <field name="Orders" offset="16" type="int32" optional="Y" repeatable="N"/>
            </fields>
        </group>
        <message name="SnapshotRefresh" id="13" superMessage="SymbolResponse" size="24">
            <fields>
                <field name="Symbol" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="Entries" offset="16" type="SnapshotRefreshEntry" optional="N" repeatable="Y"/>
            </fields>
        </message>
        <message name="NewsRequest" id="14" size="8">
            <subMessages>
                <subMessage name="SubscribeNewsRequest"/>
                <subMessage name="UnsubscribeNewsRequest"/>
            </subMessages>
        </message>
        <message name="NewsResponse" id="15" size="8">
            <subMessages>
                <subMessage name="SubscribeNewsAccept"/>
                <subMessage name="SubscribeNewsReject"/>
                <subMessage name="UnsubscribeNewsAccept"/>
                <subMessage name="NewsNotification"/>
            </subMessages>
        </message>
        <message name="SubscribeNewsRequest" id="16" superMessage="NewsRequest" size="8"/>
        <message name="SubscribeNewsAccept" id="17" superMessage="NewsResponse" size="8"/>
        <message name="SubscribeNewsReject" id="18" superMessage="NewsResponse" size="8"/>
        <message name="UnsubscribeNewsRequest" id="19" superMessage="NewsRequest" size="8"/>
        <message name="UnsubscribeNewsAccept" id="20" superMessage="NewsResponse" size="8"/>
        <enum name="NewsSeverity" size="4">
            <members>
                <member name="Critical" value="0"/>
                <member name="Warning" value="1"/>
                <member name="Information" value="2"/>
            </members>
        </enum>
        <message name="NewsNotification" id="21" superMessage="NewsResponse" size="28">
            <fields>
                <field name="Severity" offset="8" type="NewsSeverity" optional="N" repeatable="N"/>
                <field name="Header" offset="12" type="string" optional="N" repeatable="N"/>
                <field name="Text" offset="20" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="Logout" id="22" size="8"/>
        <bloc name="ClientLoginPublic" head="108_9">
            <states>
                <state label="108_9">
                    <operations>
                        <recv name="PublicLoginAccept">
                            <messages>
                                <message name="LoginAccept"/>
                            </messages>
                        </recv>
                        <recv name="PublicLoginReject" disconnect="">
                            <messages>
                                <message name="LoginReject"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
            </states>
        </bloc>
        <bloc name="ClientLoginPrivate" head="119_9">
            <states>
                <state label="119_9">
                    <operations>
                        <recv name="Password" next="121_13">
                            <messages>
                                <message name="PasswordRequest"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
                <state label="121_13">
                    <operations>
                        <send next="123_17">
                            <messages>
                                <message name="PasswordResponse"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="123_17">
                    <operations>
                        <recv name="PrivateLoginAccept">
                            <messages>
                                <message name="LoginAccept"/>
                            </messages>
                        </recv>
                        <recv name="PrivateLoginReject" disconnect="">
                            <messages>
                                <message name="LoginReject"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
            </states>
        </bloc>
        <bloc name="ClientLogout" head="136_9">
            <states>
                <state label="136_9">
                    <operations>
                        <recv next="136_9">
                            <messages>
                                <message name="SymbolResponse"/>
                                <message name="NewsResponse"/>
                            </messages>
                        </recv>
                        <recv disconnect="">
                            <messages>
                                <message name="Logout"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
            </states>
        </bloc>
        <processor name="Client" head="148_9">
            <subProcessors>
                <subProcessor name="SymbolClient"/>
                <subProcessor name="NewsClient"/>
            </subProcessors>
            <states>
                <state label="148_9">
                    <operations>
                        <send name="LoginPublic" next="150_13_108_9">
                            <messages>
                                <message name="LoginPublicRequest"/>
                            </messages>
                        </send>
                        <send name="LoginPrivate" next="154_13_119_9">
                            <messages>
                                <message name="LoginPrivateRequest"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="150_13_108_9">
                    <operations>
                        <recv name="PublicLoginAccept" next="157_9">
                            <messages>
                                <message name="LoginAccept"/>
                            </messages>
                        </recv>
                        <recv name="PublicLoginReject" disconnect="">
                            <messages>
                                <message name="LoginReject"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="LoginPublic"/>
                    </contexts>
                </state>
                <state label="154_13_119_9">
                    <operations>
                        <recv name="Password" next="154_13_121_13">
                            <messages>
                                <message name="PasswordRequest"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="LoginPrivate"/>
                    </contexts>
                </state>
                <state label="154_13_121_13">
                    <operations>
                        <send next="154_13_123_17">
                            <messages>
                                <message name="PasswordResponse"/>
                            </messages>
                        </send>
                    </operations>
                    <contexts>
                        <context name="LoginPrivate"/>
                    </contexts>
                </state>
                <state label="154_13_123_17">
                    <operations>
                        <recv name="PrivateLoginAccept" next="157_9">
                            <messages>
                                <message name="LoginAccept"/>
                            </messages>
                        </recv>
                        <recv name="PrivateLoginReject" disconnect="">
                            <messages>
                                <message name="LoginReject"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="LoginPrivate"/>
                    </contexts>
                </state>
                <state label="157_9">
                    <operations>
                        <send next="157_9">
                            <messages>
                                <message name="SymbolRequest"/>
                                <message name="NewsRequest"/>
                            </messages>
                        </send>
                        <recv next="157_9">
                            <messages>
                                <message name="SymbolResponse"/>
                                <message name="NewsResponse"/>
                            </messages>
                        </recv>
                        <send name="Logout" next="167_13_136_9">
                            <messages>
                                <message name="Logout"/>
                            </messages>
                        </send>
                        <recv name="Logout">
                            <messages>
                                <message name="Logout"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
                <state label="167_13_136_9">
                    <operations>
                        <recv next="167_13_136_9">
                            <messages>
                                <message name="SymbolResponse"/>
                                <message name="NewsResponse"/>
                            </messages>
                        </recv>
                        <recv disconnect="">
                            <messages>
                                <message name="Logout"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="Logout"/>
                    </contexts>
                </state>
            </states>
        </processor>
        <processor name="SymbolClient" type="string" superProcessor="Client" head="181_9">
            <fields>
                <field name="SymbolRequest.Symbol"/>
                <field name="SymbolResponse.Symbol"/>
            </fields>
            <states>
                <state label="181_9">
                    <operations>
                        <send name="SubscribeSymbol" next="183_13">
                            <messages>
                                <message name="SubscribeSymbolRequest"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="183_13">
                    <operations>
                        <recv name="SubscribeSymbolAccept" next="192_9">
                            <messages>
                                <message name="SubscribeSymbolAccept"/>
                            </messages>
                        </recv>
                        <recv name="SubscribeSymbolReject">
                            <messages>
                                <message name="SubscribeSymbolReject"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="SubscribeSymbol"/>
                    </contexts>
                </state>
                <state label="192_9">
                    <operations>
                        <recv name="Snapshot" next="192_9">
                            <messages>
                                <message name="SnapshotRefresh"/>
                            </messages>
                        </recv>
                        <send name="UnsubscribeSymbol" next="198_13">
                            <messages>
                                <message name="UnsubscribeSymbolRequest"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="198_13">
                    <operations>
                        <recv next="198_13">
                            <messages>
                                <message name="SnapshotRefresh"/>
                            </messages>
                        </recv>
                        <recv>
                            <messages>
                                <message name="UnsubscribeSymbolAccept"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="UnsubscribeSymbol"/>
                    </contexts>
                </state>
            </states>
        </processor>
        <processor name="NewsClient" superProcessor="Client" head="215_9">
            <messages>
                <message name="NewsRequest"/>
                <message name="NewsResponse"/>
            </messages>
            <states>
                <state label="215_9">
                    <operations>
                        <send name="SubscribeNews" next="217_13">
                            <messages>
                                <message name="SubscribeNewsRequest"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="217_13">
                    <operations>
                        <recv name="SubscribeNewsAccept" next="226_9">
                            <messages>
                                <message name="SubscribeNewsAccept"/>
                            </messages>
                        </recv>
                        <recv name="SubscribeNewsReject">
                            <messages>
                                <message name="SubscribeNewsReject"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="SubscribeNews"/>
                    </contexts>
                </state>
                <state label="226_9">
                    <operations>
                        <recv name="News" next="226_9">
                            <messages>
                                <message name="NewsNotification"/>
                            </messages>
                        </recv>
                        <send name="UnsubscribeNews" next="232_13">
                            <messages>
                                <message name="UnsubscribeNewsRequest"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="232_13">
                    <operations>
                        <recv next="232_13">
                            <messages>
                                <message name="NewsNotification"/>
                            </messages>
                        </recv>
                        <recv>
                            <messages>
                                <message name="UnsubscribeNewsAccept"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="UnsubscribeNews"/>
                    </contexts>
                </state>
            </states>
        </processor>
        <bloc name="ServerLoginPublic" head="245_9">
            <states>
                <state label="245_9">
                    <operations>
                        <send>
                            <messages>
                                <message name="LoginAccept"/>
                            </messages>
                        </send>
                        <send disconnect="">
                            <messages>
                                <message name="LoginReject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
            </states>
        </bloc>
        <bloc name="ServerLoginPrivate" head="256_9">
            <states>
                <state label="256_9">
                    <operations>
                        <send next="258_13">
                            <messages>
                                <message name="PasswordRequest"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="258_13">
                    <operations>
                        <recv name="Password" next="260_17">
                            <messages>
                                <message name="PasswordResponse"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
                <state label="260_17">
                    <operations>
                        <send>
                            <messages>
                                <message name="LoginAccept"/>
                            </messages>
                        </send>
                        <send disconnect="">
                            <messages>
                                <message name="LoginReject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
            </states>
        </bloc>
        <bloc name="ServerLogout" head="273_9">
            <states>
                <state label="273_9">
                    <operations>
                        <send next="273_9">
                            <messages>
                                <message name="SymbolResponse"/>
                                <message name="NewsResponse"/>
                            </messages>
                        </send>
                        <send disconnect="">
                            <messages>
                                <message name="Logout"/>
                            </messages>
                        </send>
                    </operations>
                </state>
            </states>
        </bloc>
        <processor name="Server" head="285_9">
            <subProcessors>
                <subProcessor name="SymbolServer"/>
                <subProcessor name="NewsServer"/>
            </subProcessors>
            <states>
                <state label="285_9">
                    <operations>
                        <recv name="LoginPublic" next="287_13_245_9">
                            <messages>
                                <message name="LoginPublicRequest"/>
                            </messages>
                        </recv>
                        <recv name="LoginPrivate" next="291_13_256_9">
                            <messages>
                                <message name="LoginPrivateRequest"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
                <state label="287_13_245_9">
                    <operations>
                        <send next="294_9">
                            <messages>
                                <message name="LoginAccept"/>
                            </messages>
                        </send>
                        <send disconnect="">
                            <messages>
                                <message name="LoginReject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="291_13_256_9">
                    <operations>
                        <send next="291_13_258_13">
                            <messages>
                                <message name="PasswordRequest"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="291_13_258_13">
                    <operations>
                        <recv name="Password" next="291_13_260_17">
                            <messages>
                                <message name="PasswordResponse"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
                <state label="291_13_260_17">
                    <operations>
                        <send next="294_9">
                            <messages>
                                <message name="LoginAccept"/>
                            </messages>
                        </send>
                        <send disconnect="">
                            <messages>
                                <message name="LoginReject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="294_9">
                    <operations>
                        <recv next="294_9">
                            <messages>
                                <message name="SymbolRequest"/>
                                <message name="NewsRequest"/>
                            </messages>
                        </recv>
                        <send next="294_9">
                            <messages>
                                <message name="SymbolResponse"/>
                                <message name="NewsResponse"/>
                            </messages>
                        </send>
                        <recv name="Logout" next="304_13_273_9">
                            <messages>
                                <message name="Logout"/>
                            </messages>
                        </recv>
                        <send>
                            <messages>
                                <message name="Logout"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="304_13_273_9">
                    <operations>
                        <send next="304_13_273_9">
                            <messages>
                                <message name="SymbolResponse"/>
                                <message name="NewsResponse"/>
                            </messages>
                        </send>
                        <send disconnect="">
                            <messages>
                                <message name="Logout"/>
                            </messages>
                        </send>
                    </operations>
                </state>
            </states>
        </processor>
        <processor name="SymbolServer" type="string" superProcessor="Server" head="318_9">
            <fields>
                <field name="SymbolRequest.Symbol"/>
                <field name="SymbolResponse.Symbol"/>
            </fields>
            <states>
                <state label="318_9">
                    <operations>
                        <recv name="SubscribeSymbol" next="320_13">
                            <messages>
                                <message name="SubscribeSymbolRequest"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
                <state label="320_13">
                    <operations>
                        <send next="329_9">
                            <messages>
                                <message name="SubscribeSymbolAccept"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="SubscribeSymbolReject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="329_9">
                    <operations>
                        <send next="329_9">
                            <messages>
                                <message name="SnapshotRefresh"/>
                            </messages>
                        </send>
                        <recv name="UnsubscribeSymbol" next="335_13">
                            <messages>
                                <message name="UnsubscribeSymbolRequest"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
                <state label="335_13">
                    <operations>
                        <send next="335_13">
                            <messages>
                                <message name="SnapshotRefresh"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="UnsubscribeSymbolAccept"/>
                            </messages>
                        </send>
                    </operations>
                </state>
            </states>
        </processor>
        <processor name="NewsServer" superProcessor="Server" head="352_9">
            <messages>
                <message name="NewsRequest"/>
                <message name="NewsResponse"/>
            </messages>
            <states>
                <state label="352_9">
                    <operations>
                        <recv name="SubscribeNews" next="354_13">
                            <messages>
                                <message name="SubscribeNewsRequest"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
                <state label="354_13">
                    <operations>
                        <send next="363_9">
                            <messages>
                                <message name="SubscribeNewsAccept"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="SubscribeNewsReject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="363_9">
                    <operations>
                        <send next="363_9">
                            <messages>
                                <message name="NewsNotification"/>
                            </messages>
                        </send>
                        <recv name="UnsubscribeNews" next="369_13">
                            <messages>
                                <message name="UnsubscribeNewsRequest"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
                <state label="369_13">
                    <operations>
                        <send next="369_13">
                            <messages>
                                <message name="NewsNotification"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="UnsubscribeNewsAccept"/>
                            </messages>
                        </send>
                    </operations>
                </state>
            </states>
        </processor>
    </members>
</protocol>
